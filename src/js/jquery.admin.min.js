(()=>{function J(e){e.height=e.contentWindow.document.body.scrollHeight+"px"}jQuery(document).ready(function(e){e("#my-calendar").on("submit",function(t){var a=e("#mc_unsubmitted");a.remove()});var g=document.getElementById("my-calendar");if(g){var f=[],o=[],_=g.querySelectorAll("input, select");_.forEach(t=>{var a=t.value;t.addEventListener("keydown",function(i){_.forEach(d=>{var m=d.value;o.push(m)});var s=f.slice().sort(),n=o.slice().sort(),c=p(s,n),r=document.getElementById("mc_unsubmitted");!c&&!r&&(r=document.createElement("div"),r.id="mc_unsubmitted",g.appendChild(r))}),f.push(a)})}function p(t,a){t.length===a.length&&t.every(function(i,s){return i===a[s]})}e(".preview-link").hide();var u=e(".preview-link").attr("data-css");e("#mc_css_file").on("change",function(t){var a=e(this).val();if(a!==u){var i=e(".preview-link").prop("href"),s=e(".preview-link").attr("data-css"),n=i.replace(s,a);e(".preview-link").prop("href",n).attr("data-css",a).show()}}),e("#e_schedule").on("click",".add_field",function(){e(".event_span").show();var t=e(".datetime-template").length,a=new Number(t+1),i=e("#event"+t).clone().attr("id","event"+a);e(i).find("input").prop("disabled",!1),e(i).find("button.restore_field").removeClass("restore_field").addClass("del_field").text(mcAdmin.deleteButton);var s=e("#event"+t);e("#event1").hide(),i.find(".number_of").text(t),e("#event"+t).after(i);var n=i.find("input"),c=i.find(".event-time"),r=i.find(".event-begin"),d=i.find(".event-end"),m=e("#mc_event_time").val(),N=e("#mc_event_endtime").val(),P=s.find(".event-begin").val();P||(P=document.querySelector('[identifier="mc_event_date"]').value),N||(N=document.querySelector('[identifier="mc_event_enddate"]').value),d.val(N),r.val(P),c.val(m).trigger("focus");var W=i.find("label");n.each(function(){var F=e(this).attr("id");newId=F+a,e(this).attr("id",newId).prop("disabled",!1)}),W.each(function(){var F=e(this).attr("for");newFor=F+a,e(this).attr("for",newFor)}),a==40&&e(".add_field").attr("disabled","disabled")}),e("#e_schedule").on("click",".del_field",function(){var t=e(this).parents("li").attr("id");e("#"+t+" input").prop("disabled",!0).removeClass("enabled").addClass("disabled"),e(".add_field").prop("disabled",!1),e(this).removeClass("del_field").addClass("restore_field").removeClass("button-delete").text(mcAdmin.restoreButton),e("#"+t).find(".remove_field").removeClass("hidden"),e(this).parents("div").addClass("multiple")}),e("#e_schedule").on("click",".remove_field",function(){var t=e(".datetime-template.enabled").length;e(this).parents("div").removeClass("multiple"),e(this).parents("li").remove(),t-1<=1&&(e(".event_span").hide(),e("#event1, #event1 .buttons").show())}),e("#e_schedule").on("click",".restore_field",function(){var t=e(this).parents("li").attr("id");e(this).parents("div").removeClass("multiple"),e(this).removeClass("restore_field").addClass("del_field button-delete").text(mcAdmin.deleteButton),e("#"+t).find(".remove_field").addClass("hidden"),e("#"+t+" input").prop("disabled",!1).removeClass("disabled").addClass("emabled")});var l=e(".disable-recurrences");l.find("fieldset").hide(),l.find("fieldset input, fieldset select, fieldset duet-date-picker").prop("disabled",!0),e(".enable-repetition").on("click",function(){var t=e(this).attr("aria-expanded");t!=="false"?(e(this).attr("aria-expanded","false"),e(this).find(".dashicons").removeClass("dashicons-arrow-down").addClass("dashicons-arrow-right"),l.find("fieldset").hide(),l.find("fieldset input, fieldset select, fieldset duet-date-picker").prop("disabled",!0)):(e(this).attr("aria-expanded","true"),e(this).find(".dashicons").removeClass("dashicons-arrow-right").addClass("dashicons-arrow-down"),l.find("fieldset").show(),l.find("fieldset input, fieldset select, fieldset duet-date-picker").prop("disabled",!1))}),e("#e_schedule").on("change","input",function(){l.find("fieldset").show(),l.find(".enable-repetition").attr("aria-expanded","true"),l.find(".enable-repetition .dashicons").addClass("dashicons-arrow-down").removeClass("dashicons-arrow-right"),l.find("fieldset input, fieldset select, fieldset duet-date-picker").prop("disabled",!1)});var w=document.querySelector(".add-location");if(w!==null){var v=document.getElementById("l_preset"),y=v.value,C=w.getAttribute("aria-controls"),x=document.getElementById(C);x.classList.add("hidden"),w.addEventListener("click",function(t){var a=this.getAttribute("aria-expanded");a==="true"?(v.value=y,x.classList.add("hidden"),this.setAttribute("aria-expanded","false"),this.firstChild.classList.add("dashicons-plus"),this.firstChild.classList.remove("dashicons-minus")):(v.value="none",x.classList.remove("hidden"),this.setAttribute("aria-expanded","true"),this.firstChild.classList.add("dashicons-minus"),this.firstChild.classList.remove("dashicons-plus"))})}var L=document.querySelector(".toggle-inside");if(L!==null){var Q=L.parentNode.parentNode,E=Q.querySelector(".inside");E.classList.add("hidden"),L.addEventListener("click",function(t){var a=this.getAttribute("aria-expanded");a==="true"?(E.classList.add("hidden"),this.setAttribute("aria-expanded","false"),this.firstChild.classList.add("dashicons-plus"),this.firstChild.classList.remove("dashicons-minus")):(E.classList.remove("hidden"),this.setAttribute("aria-expanded","true"),this.firstChild.classList.add("dashicons-minus"),this.firstChild.classList.remove("dashicons-plus"))})}var H=document.querySelector(".toggle-dates");if(H!==null){var q=document.getElementById("mc-view-scheduled-dates"),K=document.getElementById("my-calendar"),R=document.querySelectorAll(".button-primary");q.classList.add("hidden"),H.addEventListener("click",function(t){var a=this.getAttribute("aria-expanded");a==="true"?(this.setAttribute("data-action",""),K.classList.remove("disabled"),R.forEach(i=>{i.disabled=!1}),q.classList.add("hidden"),this.setAttribute("aria-expanded","false"),this.firstChild.classList.add("dashicons-arrow-right"),this.firstChild.classList.remove("dashicons-arrow-down")):(this.setAttribute("data-action","shiftforward"),R.forEach(i=>{i.disabled=!0}),K.classList.add("disabled"),q.classList.remove("hidden"),this.setAttribute("aria-expanded","true"),this.firstChild.classList.add("dashicons-arrow-down"),this.firstChild.classList.remove("dashicons-arrow-right"))})}e(document).on("keydown","#mc-scheduled-dates button",function(t){var a=t.keyCode?t.keyCode:t.which,i=e(":focus").attr("data-action");!t.shiftKey&&a==9&&i=="shiftback"&&(t.preventDefault(),e(".toggle-dates").trigger("focus")),t.shiftKey&&a==9&&i=="shiftforward"&&(t.preventDefault(),e("[data-action=shiftback]").trigger("focus"))}),e(".event_span").hide(),e('.mc-actions input[type="submit"]').attr("disabled","disabled"),e("#mass_replace_on").on("click",function(){var t=e(this).prop("checked");t?e(".mass-replace-container").show():e(".mass-replace-container").hide()}),e(".selectall").on("click",function(){var t=e(this).prop("checked");t?e('.mc-actions input[type="submit"]').removeAttr("disabled"):e('.mc-actions input[type="submit"]').attr("disabled","disabled");var a=e(this).attr("data-action");e('input[name="'+a+'[]"]').each(function(){e(this).prop("checked",t)})}),e(".row-actions").on("focus","a",function(){e(this).parent(".row-actions").css({left:"auto"})}),e(".row-actions").on("blur","a",function(){e(this).parent(".row-actions").css({left:"-999em"})}),e("#mc_bulk_actions").on("change",function(t){var a=e(this).val();e("#mc_bulk_actions_footer").val(a)}),e("#mc_bulk_actions_footer").on("change",function(t){var a=e(this).val();e("#mc_bulk_actions").val(a)}),e("#my-calendar-admin-table input, .mc-actions input:not(#mass_replace_on)").on("change",function(t){var a=e(this).prop("checked"),i=e(this).parents("table").hasClass("mc-groups-table"),s=e("#my-calendar-admin-table input:checked"),n=s.length;a?(i&&n>1||!i)&&(e('.mc-actions input[type="submit"]').removeAttr("disabled"),e(".mc-actions #mass_replace_on").removeAttr("disabled")):(i&&n<2||!i&&n==0)&&(e('.mc-actions input[type="submit"]').attr("disabled","disabled"),e(".mc-actions #mass_replace_on").attr("disabled","disabled"))});var I=e(".new-event-category");I.hide(),e("#event_category_new").prop("checked",!1);var T=e("label[for=event_category_new]");T.find(".dashicons-minus").hide(),e("#event_category_new").on("click",function(){var t=e(this).prop("checked");t?(I.show(),e("#event_category_name").prop("disabled",!1),T.find(".dashicons").addClass("dashicons-minus").removeClass("dashicons-plus")):(I.hide(),e("#event_category_name").prop("disabled",!0),T.find(".dashicons").addClass("dashicons-plus").removeClass("dashicons-minus"))});var k=e(".mc-primary-category"),j=e(".categories input:checked");j.length<=1&&k.hide(),j.each(function(){var t=e(this).val(),a=k.find("select");a.find("option[value="+t+"]").show()}),e(".categories input").on("change",function(t){var a=e(".categories input:checked"),i=e(".categories input");a.length>1?k.show().prop("disabled",!1):k.hide().prop("disabled",!0),i.each(function(){var s=e(this).val(),n=e(this).prop("checked"),c=k.find("select");n?c.find("option[value="+s+"]").show().prop("disabled",!1):c.find("option[value="+s+"]").hide().prop("disabled",!0)})}),e(".fifth-week-schedule").hide(),e("#e_recur").on("change",function(t){var a=e(this).val();a!="S"?e("duet-date-picker[identifier=e_repeats]").attr("required","true"):e("duet-date-picker[identifier=e_repeats]").removeAttr("required"),a=="U"?(e("#e_every").attr("max",1).val(1),e(".fifth-week-schedule").show()):(e("#e_every").attr("max",99),e(".fifth-week-schedule").hide())});var S=e('input[id="e_allday"]').prop("checked");S||e(".event_time_label").hide(),e('input[id="e_allday"]').change(function(){var t=e(this).prop("checked");t?e(".event_time_label").show():e(".event_time_label").hide()});var S=e('input[id="mc_remote"]').prop("checked");S||e(".mc_remote_info").hide(),e('input[id="mc_remote"]').change(function(){var t=e(this).prop("checked");t?e(".mc_remote_info").show():e(".mc_remote_info").hide()});var z=e('input[id="mc_display_single-gmap"]').prop("checked");z&&e("#mc_gmap_api_key").attr("required","true"),e('input[id="mc_display_single-gmap"]').change(function(){var t=e(this).prop("checked");t?e("#mc_gmap_api_key").attr("required","true"):e("#mc_gmap_api_key").removeAttr("required")});var G=e('input[id="e_hide_end"]').prop("checked");G&&e("label[for=mc_event_endtime] span").show(),e('input[id="e_hide_end"]').change(function(){var t=e(this).prop("checked");t?e("label[for=mc_event_endtime] span").show():e("label[for=mc_event_endtime] span").hide()});for(var A=window.location.hash,B=document.querySelectorAll(".mc-tabs"),h=0;h<B.length;h++){var O=e(B[h]).find(A);O.length!==0?M(A):(A=e(B[h]).find("[role=tablist]").attr("data-default"),M("#"+A))}for(var D=document.querySelectorAll(".mc-tabs [role=tab]"),h=0;h<D.length;h++)D[h].addEventListener("click",U),D[h].addEventListener("keydown",V);function U(t){var a=e(t.currentTarget).closest(".tabs"),i=a.find("[role=tab]"),s=e(t.currentTarget).closest(".mc-tabs"),n=e(t.currentTarget).parents(".inside");if(n.length==0&&!s.hasClass("mcs-tabs"))var c=s.find(".ui-sortable > [role=tabpanel]");else var c=s.find("[role=tabpanel]");for(var r=0;r<i.length;r++)i[r].setAttribute("aria-selected","false");t.target.setAttribute("aria-selected","true");for(var d=t.target.getAttribute("aria-controls"),r=0;r<c.length;r++)c[r].setAttribute("aria-hidden","true");n.length==0&&(window.location.hash=d),document.getElementById(d).setAttribute("aria-hidden","false");for(var m=e("iframe.mc-iframe"),r=0;r<m.length;r++)iframe=m[r],J(iframe);e("#"+d).attr("tabindex","-1").trigger("focus"),window.scrollTo(0,0)}function M(t){for(var a=t.replace("#",""),i=e("button[aria-controls="+a+"]"),s=e(t).closest(".tabs"),n=s.find("[role=tab]"),c=e(t).closest(".mc-tabs"),r=c.find("[role=tabpanel]"),d=0;d<n.length;d++)n[d].setAttribute("aria-selected","false");i.attr("aria-selected","true");for(var d=0;d<r.length;d++)r[d].setAttribute("aria-hidden","true");var m=document.getElementById(a);m!==null&&m.setAttribute("aria-hidden","false")}function V(t){t.keyCode==37&&(e(t.currentTarget).prev().trigger("click").trigger("focus"),t.preventDefault()),t.keyCode==38&&(e(t.currentTarget).prev().trigger("click").trigger("focus"),t.preventDefault()),t.keyCode==39&&(e(t.currentTarget).next().trigger("click").trigger("focus"),t.preventDefault()),t.keyCode==40&&(e(t.currentTarget).next().trigger("click").trigger("focus"),t.preventDefault())}e("#mc-generator .custom").hide(),e("#mc-generator select[name=type]").on("change",function(){var t=e(this).val();t=="custom"?e("#mc-generator .custom").show():e("#mc-generator .custom").hide()}),e("#my-calendar-generate select[name=ltype]").on("change",function(t){var a=e(this).val();a!=""?e("#mc-generator input[name=lvalue]").prop("disabled",!1).prop("required",!0):e("#mc-generator input[name=lvalue]").prop("disabled",!0).prop("required",!1)}),e(".mc-sortable").sortable({placeholder:"mc-ui-state-highlight",update:function(t,a){e(".mc-sortable-update").html("Submit form to save changes")}}),e(".mc-sortable .hide").on("click",function(t){var a=e(this).find(".dashicons").hasClass("dashicons-hidden"),i=e(this).parents("li");a?(i.removeClass("mc-hidden").addClass("mc-visible"),i.find("input[type=hidden]").prop("disabled",!1),e(this).find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),wp.a11y.speak("Item shown")):(i.addClass("mc-hidden").removeClass("mc-visible"),i.find("input[type=hidden]").prop("disabled",!0),e(this).find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),wp.a11y.speak("Item hidden"))}),e(".mc-sortable .up").on("click",function(t){var a=e(this).parents().map(function(){return this.tagName}).get(),i=e.inArray("LI",a),s=e.inArray("TR",a);i==1?(e(this).parents("li").insertBefore(e(this).parents("li").prev()),e(".mc-sortable li").removeClass("mc-updated"),e(this).parents("li").addClass("mc-updated")):s==1?(e(this).parents("tr").insertBefore(e(this).parents("tr").prev()),e(".mc-sortable tr").removeClass("mc-updated"),e(this).parents("tr").addClass("mc-updated")):(e(this).parents(".mc-row").insertBefore(e(this).parents(".mc-row").prev()),e(".mc-sortable .mc-row").removeClass("mc-updated"),e(this).parents(".mc-row").addClass("mc-updated")),e(this).trigger("focus"),wp.a11y.speak("Item moved up")}),e(".mc-sortable .down").on("click",function(t){var a=e(this).parents().map(function(){return this.tagName}).get(),i=e.inArray("LI",a),s=e.inArray("TR",a);i==1?(e(this).parents("li").insertAfter(e(this).parents("li").next()),e(".mc-sortable li").removeClass("mc-updated"),e(this).parents("li").addClass("mc-updated")):s==1?(e(this).parents("tr").insertAfter(e(this).parents("tr").next()),e(".mc-sortable tr").removeClass("mc-updated"),e(this).parents("tr").addClass("mc-updated")):(e(this).parents(".mc-row").insertAfter(e(this).parents(".mc-row").next()),e(".mc-sortable .mc-row").removeClass("mc-updated"),e(this).parents(".mc-row").addClass("mc-updated")),e(this).trigger("focus"),wp.a11y.speak("Item moved down")})});var b="";(function(e){"use strict";e(function(){function g(){typeof b!="string"&&(b.detach(),b="")}e(".mc-image-upload").on("click",".remove-image",function(f){e("#e_image_id").val(""),e("#e_image").val(""),e("#event_image").attr("src","").attr("alt",""),e(".event_image").text(mcAdmin.imageRemoved)}),e(".mc-image-upload").on("click",".select-image",function(f){f.preventDefault();var o=document.querySelector("#e_image"),_=document.querySelector("#e_image_id"),p=document.querySelector(".event_image");g(),b=wp.media({multiple:!1,title:mcAdmin.modalTitle,button:{text:mcAdmin.buttonName}}),b.on("select",function(){var u=b.state().get("selection"),l="",w="",v="",y="",C="";u&&(l=u.first().attributes.id,v=mcAdmin.thumbHeight,y=Math.round(u.first().attributes.width/u.first().attributes.height*v),C=u.first().attributes.alt,w="<img id='event_image' src='"+u.first().attributes.url+"' width='"+y+"' height='"+v+"' alt='"+C+"' />",o.value=u.first().attributes.url,_.value=l,p.innerHTML=w)}),b.open()})}),mcAdmin.mcs<2.1&&e(".mcs-tabs").each(function(g){var f=e(".mcs-tabs .wptab").length,o=window.location.hash;if(!o)var o="#"+e(".mcs-tabs .wptab:nth-of-type(1)").attr("id");e('.mcs-tabs .tabs a[href="'+o+'"]').addClass("active").attr("aria-selected","true"),f>1&&(e(".mcs-tabs .wptab").not(o).attr("aria-hidden","true"),e(".mcs-tabs .wptab").removeClass("initial-hidden"),e(o).show(),e(".mcs-tabs .tabs a").on("click",function(_){_.preventDefault(),e(".mcs-tabs .tabs a").removeClass("active").attr("aria-selected","false"),e(this).addClass("active").attr("aria-selected","true");var p=e(this).attr("href");window.location.hash=p,e(".mcs-tabs .wptab").not(p).attr("aria-hidden","true"),e(p).removeAttr("aria-hidden").show().trigger("focus")}))})})(jQuery);})();
