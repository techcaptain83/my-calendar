!function(e){"use strict";if(e((function(){n();var e=document.querySelector(".mc-main");e&&e.classList.remove("mcjs")})),"true"===my_calendar.mini&&(e(".mini .calendar-events").hide(),e(document).on("click",".mini .has-events .trigger",(function(a){a.preventDefault();var t=e(this).parents(".has-events").children(".calendar-events");t.toggle(),e(".mini .has-events").children(".trigger").removeClass("active-toggle"),e(".mini .has-events").children().not(".mc-date-container").not(t).hide(),e(this).addClass("active-toggle"),a.stopImmediatePropagation()})),e(document).on("click",".calendar-events .close",(function(a){a.preventDefault(),e(this).closest(".mini .has-events").children(".trigger").removeClass("active-toggle"),e(this).closest("div.calendar-events").toggle(),a.stopImmediatePropagation()}))),"true"===my_calendar.list&&"false"===my_calendar.links&&(e("li .list-event").hide(),e("li.current-day .list-event").show(),e("li.current-day .event-date .mc-text-button").attr("aria-expanded",!0),e(document).on("click",".event-date button",(function(a){return a.preventDefault(),console.log(e(this).closest(".mc-events").find(".mc-event")),e(this).closest(".mc-events").find(".mc-event").toggle(),e(this).closest(".mc-events").find(".mc-event").is(":visible")?e(this).attr("aria-expanded","true"):e(this).attr("aria-expanded","false"),a.stopImmediatePropagation(),!1}))),"true"===my_calendar.grid||"true"===my_calendar.list&&"true"===my_calendar.links){var a="true"===my_calendar.grid?".calendar-event":".list-event",t="true"===my_calendar.links&&"true"===my_calendar.grid?".mc-events":a;e(t+" .single-details").hide(),e(document).on("click",t+" .event-title .open",(function(a){var n=e(this).parents(".mc-event").children(".details").is(":visible"),s=e(this).attr("aria-controls"),i=e("#"+s);n?e(this).attr("aria-expanded","false"):e(this).attr("aria-expanded","true"),a.preventDefault();var r=e(this).parents(".mc-event").children();return e(this).closest(".mc-main").toggleClass("grid-open"),i.toggle(),r.find("a, object, :input, iframe, [tabindex]").last().attr("data-action","shiftback"),e(t).children(".single-details").not(r).hide(),a.stopImmediatePropagation(),!1})),e(document).on("click",".calendar-event .close",(function(a){a.preventDefault(),e(this).parents(".mc-event").find("a.open").attr("aria-expanded","false"),e(this).closest(".mc-main").removeClass("grid-open"),e(this).closest(".mc-event").find(".event-title a").trigger("focus"),e(this).closest("div.single-details").toggle(),a.stopImmediatePropagation()})),e(document).on("keydown",(function(a){27==(a.keyCode?a.keyCode:a.which)&&(e(".mc-main ").removeClass("grid-open"),e(".calendar-event div.single-details").hide(),e(".mini .calendar-events").hide())})),e(document).on("keydown",".mc-event a, .mc-event object, .mc-event :input, .mc-event iframe, .mc-event [tabindex]",(function(a){var t=a.keyCode?a.keyCode:a.which,n=e(":focus").attr("data-action");a.shiftKey||9!=t||"shiftback"!=n||(a.preventDefault(),e(".mc-toggle.close").trigger("focus")),a.shiftKey&&9==t&&"shiftforward"==n&&(a.preventDefault(),e("[data-action=shiftback]").trigger("focus"))}))}function n(){e(".mc-user-time").each((function(){var a=e(this).text(),t=e(this).attr("data-label"),n='<span class="mc-local-time-time">'+new Date(a).toLocaleTimeString().replace(":00 "," ")+"</span>",s='<span class="mc-local-time-date">'+new Date(a).toLocaleDateString()+"</span>";e(this).html('<span class="mc-local-time-label">'+t+"</span> "+s+'<span class="sep">, </span>'+n).attr("data-time",a)}))}"true"===my_calendar.ajax&&e(document).on("click",".my-calendar-header a:not(.mc-print a, .mc-export a), .my-calendar-footer a:not(.mc-print a, .mc-export a), .my-calendar-header input[type=submit], .my-calendar-footer input[type=submit]",(function(a){a.preventDefault();var t=e(this).attr("id"),s=e(this).closest(".mc-main"),i=s.attr("id"),r="",c="",l="",d="",o="",m="",h="";if("INPUT"===this.nodeName){var p=e(this).parents("form");if(p.hasClass("mc-date-switcher"))r=p.find("select[name=month]").val(),c=p.find("select[name=dy]").val(),l=p.find("select[name=yr]").val();if(p.hasClass("mc-categories-switcher"))d=p.find("select[name=mcat]").val();if(p.hasClass("mc-locations-switcher"))o=p.find("select[name=loc]").val();if(p.hasClass("mc-access-switcher"))m=p.find("select[name=access]").val();h=s.find("#mcs").val();var v=e(this).attr("data-href")}else v=e(this).attr("href");let u;try{u=new URL(v),u.searchParams.delete("embed"),"INPUT"===this.nodeName&&(""!==r&&(u.searchParams.delete("month"),u.searchParams.delete("dy"),u.searchParams.delete("yr"),u.searchParams.append("month",parseInt(r)),void 0!==c&&u.searchParams.append("dy",parseInt(c)),u.searchParams.append("yr",parseInt(l))),""!==d&&(u.searchParams.delete("mcat"),u.searchParams.append("mcat",d)),""!==o&&(u.searchParams.delete("loc"),u.searchParams.delete("ltype"),u.searchParams.append("ltype","name"),u.searchParams.append("loc",o)),""!==m&&(u.searchParams.delete("access"),u.searchParams.append("access",parseInt(m))),u.searchParams.delete("mcs"),""!==h&&void 0!==h&&u.searchParams.append("mcs",encodeURIComponent(h)),v=u.toString()),window.history.pushState({},"",u)}catch(e){u=!1}var f=s.height();e("#"+i).html('<div class="mc-loading"></div><div class="loading" style="height:'+f+'px"><span class="screen-reader-text">Loading...</span></div>'),e("#"+i).load(v+" #"+i+" > *",(function(a,s,r){"error"==s&&e("#"+i).html(r.status+" "+r.statusText),"undefined"!=typeof my_calendar&&"true"==my_calendar.list&&("false"===my_calendar.links?(e("li.mc-events").find(".mc-events").hide(),e("li.current-day").children().show()):e("li.mc-events .single-details").hide()),"undefined"!=typeof my_calendar&&"true"==my_calendar.grid&&e(".calendar-event").children().not(".event-title").hide(),"undefined"!=typeof my_calendar&&"true"==my_calendar.mini&&e(".mini .has-events").children().not(".mc-date-container").hide(),e("#"+t).trigger("focus");var c=e("#mc_head_"+i).text();wp.a11y.speak(c),n()}))})),e(".mc-main a[target=_blank]").append(' <span class="dashicons dashicons-external" aria-hidden="true"></span><span class="screen-reader-text"> '+my_calendar.newWindow+"</span>")}(jQuery);